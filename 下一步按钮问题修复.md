# ä¸‹ä¸€æ­¥æŒ‰é’®é—®é¢˜ä¿®å¤

## é—®é¢˜åˆ†æ

ç”¨æˆ·åé¦ˆ"ä¸‹ä¸€æ­¥æŒ‰é’®ç‚¹äº†å°±å˜è‰²äº†ï¼Œç„¶åå°±æ²¡ååº”"ï¼Œä¸»è¦é—®é¢˜ï¼š

1. **ç©ºå€¼å¼•ç”¨é”™è¯¯** - `stepInfo.value` å¯èƒ½ä¸º `undefined`
2. **çŠ¶æ€é‡ç½®ä¸åŠæ—¶** - åˆ‡æ¢æ­¥éª¤æ—¶ç­”é¢˜çŠ¶æ€æ²¡æœ‰é‡ç½®
3. **æŒ‰é’®çŠ¶æ€è®¡ç®—é”™è¯¯** - ç¦ç”¨é€»è¾‘å¯èƒ½æœ‰é—®é¢˜

## ä¿®å¤å†…å®¹

### 1. ä¿®å¤ç©ºå€¼å¼•ç”¨

**ä¹‹å‰:**

```typescript
const stepInfo = computed(() => navigationInfo.value.currentStep); // å¯èƒ½æŠ¥é”™
:disabled="stepInfo.type === 'choice' && !hasAnswered"              // å¯èƒ½æŠ¥é”™
```

**ä¿®å¤å:**

```typescript
const stepInfo = computed(() => navigationInfo.value?.currentStep); // å®‰å…¨è®¿é—®
:disabled="stepInfo?.type === 'choice' && !hasAnswered"             // å®‰å…¨è®¿é—®
```

### 2. æ·»åŠ çŠ¶æ€é‡ç½®é€»è¾‘

**æ–°å¢ç›‘å¬:**

```typescript
// ç›‘å¬æ­¥éª¤å˜åŒ–ï¼Œé‡ç½®ç­”é¢˜çŠ¶æ€
watch(
  [courseId, chapterId, stepId],
  () => {
    resetAnswerState();
  },
  { immediate: false }
);

// é¡µé¢åŠ è½½æ—¶ä¹Ÿé‡ç½®
onMounted(() => {
  resetAnswerState(); // ç¡®ä¿åˆå§‹çŠ¶æ€æ­£ç¡®
  // ...å…¶ä»–é€»è¾‘
});
```

### 3. å¢å¼ºæŒ‰é’®çŠ¶æ€è®¡ç®—

**æ·»åŠ è°ƒè¯•è®¡ç®—å±æ€§:**

```typescript
const isNextButtonDisabled = computed(() => {
  const isChoiceStep = stepInfo.value?.type === "choice";
  const result = isChoiceStep && !hasAnswered.value;
  console.log("ä¸‹ä¸€æ­¥æŒ‰é’®çŠ¶æ€:", {
    isChoiceStep,
    hasAnswered: hasAnswered.value,
    disabled: result,
  });
  return result;
});
```

### 4. å¢å¼ºç­”é¢˜çŠ¶æ€è·Ÿè¸ª

**æ·»åŠ è¯¦ç»†æ—¥å¿—:**

```typescript
const handleQuizAnswered = (isCorrect: boolean, selectedAnswer: string) => {
  hasAnswered.value = true;
  currentAnswer.value = selectedAnswer;
  console.log(
    "é€‰æ‹©é¢˜ç­”é¢˜:",
    isCorrect ? "æ­£ç¡®" : "é”™è¯¯",
    "ç­”æ¡ˆ:",
    selectedAnswer,
    "hasAnswered:",
    hasAnswered.value // æ–°å¢çŠ¶æ€è·Ÿè¸ª
  );
};
```

## è°ƒè¯•æ–¹æ³•

### 1. æ£€æŸ¥æ§åˆ¶å°è¾“å‡º

è®¿é—®é€‰æ‹©é¢˜é¡µé¢æ—¶ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
stepInfo: { type: "choice", title: "é€‰æ‹©é¢˜", ... }
ä¸‹ä¸€æ­¥æŒ‰é’®çŠ¶æ€: { isChoiceStep: true, hasAnswered: false, disabled: true }
```

### 2. ç­”é¢˜åæ£€æŸ¥çŠ¶æ€

ç‚¹å‡»é€‰é¡¹åï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
é€‰æ‹©é¢˜ç­”é¢˜: æ­£ç¡®/é”™è¯¯ ç­”æ¡ˆ: A hasAnswered: true
ä¸‹ä¸€æ­¥æŒ‰é’®çŠ¶æ€: { isChoiceStep: true, hasAnswered: true, disabled: false }
```

### 3. æ­¥éª¤åˆ‡æ¢éªŒè¯

åˆ‡æ¢æ­¥éª¤æ—¶ï¼Œåº”è¯¥çœ‹åˆ°çŠ¶æ€é‡ç½®ã€‚

## æµ‹è¯•æµç¨‹

1. **è®¿é—®é€‰æ‹©é¢˜é¡µé¢**

   ```
   /step/python/python-basics/1/2
   ```

2. **éªŒè¯åˆå§‹çŠ¶æ€**
   - ä¸‹ä¸€æ­¥æŒ‰é’®åº”è¯¥æ˜¯ç°è‰²ç¦ç”¨çŠ¶æ€
   - æ§åˆ¶å°æ˜¾ç¤º `disabled: true`

3. **ç­”é¢˜æµ‹è¯•**
   - ç‚¹å‡»ä»»æ„é€‰é¡¹
   - æŒ‰é’®åº”è¯¥å˜ä¸ºå¯ç”¨çŠ¶æ€
   - æ§åˆ¶å°æ˜¾ç¤º `hasAnswered: true, disabled: false`

4. **å¯¼èˆªæµ‹è¯•**
   - ç‚¹å‡»ä¸‹ä¸€æ­¥åº”è¯¥æ­£å¸¸è·³è½¬
   - è¿”å›åçŠ¶æ€åº”è¯¥é‡ç½®

## å¯èƒ½çš„å…¶ä»–é—®é¢˜

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯èƒ½æ˜¯ï¼š

1. **CSS æ ·å¼é—®é¢˜** - van-button çš„ç¦ç”¨æ ·å¼å¯èƒ½æœ‰é—®é¢˜
2. **äº‹ä»¶å†²çª** - å¯èƒ½æœ‰å…¶ä»–äº‹ä»¶ç›‘å¬å™¨å¹²æ‰°
3. **è·¯ç”±é—®é¢˜** - `handleNext` æ–¹æ³•æœ¬èº«å¯èƒ½æœ‰é—®é¢˜

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›ä¸€æ­¥è°ƒè¯•ï¼š

```typescript
const handleNext = () => {
  console.log("handleNext è¢«è°ƒç”¨");
  console.log("navigationInfo:", navigationInfo.value);
  // ... åŸæœ‰é€»è¾‘
};
```

ç°åœ¨æŒ‰é’®çš„çŠ¶æ€ç®¡ç†åº”è¯¥æ›´åŠ å¯é äº†ï¼ğŸ‰
